# 
# Maintainer: gearhead <ys3al35l at gmail dot com>

pkgname=bluealsa-monitor
pkgver=r16.359e5b3
pkgrel=1
pkgdesc="utomated ALSA Configuration For BlueALSA PCMs (git)"
url="https://github.com/borine/bluealsa-monitor"
arch=(x86_64 i686 armv6h armv7h aarch64 arm64)
license=(unlicense)

makedepends=("git" "meson" "cmake")

provides=("pkgname")
conflicts=("pkgname")

source=(
  "git+https://github.com/borine/$pkgname.git"
)
sha256sums=(
  'SKIP'
)

pkgver() {
	cd "$srcdir/$pkgname"
        printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

#prepare() {
#  cd "$pkgname"
#}

build() {
  cd "$srcdir/$pkgname"

  arch-meson --prefix=/usr \
    builddir
}

package() {
  cd "$pkgname"
#  DESTDIR="${pkgdir}" ninja -C builddir install
  DESTDIR="${pkgdir}" meson install -C builddir
  install -Dm644 "LICENSE.txt" \
    "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
