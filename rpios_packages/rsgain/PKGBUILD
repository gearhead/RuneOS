# Maintainer: gearhead <ys3al35l at gmail dot com>

pkgname=rsgain
pkgver=3.5.3
pkgrel=1
epoch=
pkgdesc="ReplayGain 2.0 loudness normalizer"
arch=('x86_64' 'arm64' 'armhf' 'amd64')
url="https://github.com/complexlogic/rsgain"
license=('BSD')
groups=()
depends=('libebur128-1' 'libtag1v5' 'ffmpeg' 'libfmt9' 'libinih1')
makedepends=('cmake' 'libtag1-dev' 'libebur128-dev' 'libinih-dev' 'libfmt-dev' 'libavcodec-dev' 'libavformat-dev')
checkdepends=()
optdepends=()
provides=('rsgain')
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
#source=("${pkgname}-${pkgver}.tar.gz::https://github.com/complexlogic/${pkgname}/archive/refs/tags/v${pkgver}.tar.gz")
source=("$pkgname-$pkgver.tar.gz::https://github.com/complexlogic/$pkgname/archive/refs/tags/v$pkgver.tar.gz")
noextract=()
md5sums=('SKIP')
validpgpkeys=()

build() {
#	cd "$pkgname-$pkgver"
#	mkdir build && cd build
#	cmake .. -DCMAKE_INSTALL_PREFIX=/usr
#	make
  cmake -B build -S $pkgname-$pkgver \
        -DUSE_STD_FORMAT=OFF \
        -DCMAKE_INSTALL_PREFIX=/usr
  cmake --build build
}

package() {
#	cd "$pkgname-$pkgver/build"
#	make DESTDIR="$pkgdir/" install
	DESTDIR="$pkgdir" cmake --install build
	install -Dm644 $pkgname-$pkgver/README.md "$pkgdir"/usr/share/doc/$pkgname/README.md
	install -Dm644 $pkgname-$pkgver/docs/$pkgname.1 "$pkgdir"/usr/share/man/man1/$pkgname.1
	install -Dm644 $pkgname-$pkgver/LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
